{% extends 'challenges/base.html' %}

{% block title %}ChallengeHub - –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞{% endblock %}

{% block content %}
<div class="container">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'profile' %}">–ü—Ä–æ—Ñ–∏–ª—å</a></li>
            <li class="breadcrumb-item active">–ö–∞–ª–µ–Ω–¥–∞—Ä—å: {{ user_challenge.title }}</li>
        </ol>
    </nav>
    
    <div class="card mb-4">
        <div class="card-body">
            <h4 class="card-title">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞: {{ user_challenge.title }}</h4>
            <p class="text-muted">
                {{ user_challenge.start_date|date:"d.m.Y" }} - {{ user_challenge.end_date|date:"d.m.Y" }} 
                | –ü—Ä–æ–≥—Ä–µ—Å—Å: {{ user_challenge.completion_percentage }}%
            </p>
            
            <div class="progress mb-3" style="height: 20px;">
                <div class="progress-bar bg-success calendar-progress-bar" 
                    data-progress="{{ user_challenge.completion_percentage }}">
                    {{ user_challenge.completion_percentage }}%
                </div>
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-body">
            <h5 class="card-title mb-3">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç–º–µ—Ç–∫–∏</h5>
            
            <div class="row">
                {% for day in calendar_data %}
                <div class="col-6 col-md-4 col-lg-3 mb-3">
                    <div class="card {% if day.is_completed %}border-success{% else %}border-light{% endif %}">
                        <div class="card-body text-center p-2">
                            <div class="small text-muted">{{ day.date|date:"d.m" }}</div>
                            <div class="fs-4 mb-1">
                                {% if day.is_completed %}
                                    ‚úÖ
                                {% else %}
                                    {% if day.date < today %}
                                        ‚ùå
                                    {% else %}
                                        üìÖ
                                    {% endif %}
                                {% endif %}
                            </div>
                            {% if day.rating %}
                            <div class="small">
                                {% if day.rating == 1 %}üòû
                                {% elif day.rating == 2 %}üòê
                                {% elif day.rating == 3 %}üôÇ
                                {% elif day.rating == 4 %}üòä
                                {% elif day.rating == 5 %}ü§©
                                {% endif %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <div class="mt-3">
                <div class="d-flex align-items-center gap-3">
                    <div class="d-flex align-items-center">
                        <div class="me-2">‚úÖ</div>
                        <small>–í—ã–ø–æ–ª–Ω–µ–Ω–æ</small>
                    </div>
                    <div class="d-flex align-items-center">
                        <div class="me-2">‚ùå</div>
                        <small>–ü—Ä–æ–ø—É—â–µ–Ω–æ</small>
                    </div>
                    <div class="d-flex align-items-center">
                        <div class="me-2">üìÖ</div>
                        <small>–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–π –¥–µ–Ω—å</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mt-3">
        <a href="{% url 'profile' %}" class="btn btn-outline-secondary">
            ‚Üê –ù–∞–∑–∞–¥ –≤ –ø—Ä–æ—Ñ–∏–ª—å
        </a>
    </div>
</div>

<style>
.card.border-success {
    background-color: rgba(25, 135, 84, 0.05);
}
</style>
{% endblock %}