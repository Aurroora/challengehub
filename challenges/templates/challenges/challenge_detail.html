{% extends 'challenges/base.html' %}

{% block title %}ChallengeHub - {{ challenge.title }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'home' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li class="breadcrumb-item"><a href="{% url 'challenge_list' %}">–ß–µ–ª–ª–µ–Ω–¥–∂–∏</a></li>
                <li class="breadcrumb-item active">{{ challenge.title|truncatechars:30 }}</li>
            </ol>
        </nav>
        
        <h1>{{ challenge.title }}</h1>
        
        <div class="d-flex gap-2 mb-3">
            <span class="badge bg-primary">{{ challenge.get_category_display }}</span>
            <span class="badge bg-warning text-dark">{{ challenge.difficulty_stars }}</span>
            <span class="badge bg-secondary">{{ challenge.duration_days }} –¥–Ω–µ–π</span>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">üìù –û–ø–∏—Å–∞–Ω–∏–µ</h5>
                <p class="card-text">{{ challenge.description|linebreaks }}</p>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">üéØ –ö–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å</h5>
                <ul>
                    <li>–ù–∞—á–Ω–∏—Ç–µ –≤ –ª—é–±–æ–π —É–¥–æ–±–Ω—ã–π –¥–µ–Ω—å</li>
                    <li>–û—Ç–º–µ—á–∞–π—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ</li>
                    <li>–ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –±–æ–ª—å—à–µ 2 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</li>
                    <li>–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ</li>
                </ul>
            </div>
        </div>
        
        <div class="d-grid gap-2 d-md-flex justify-content-md-start mb-5">
            {% if user.is_authenticated %}
                {% if user_challenge %}
                    <button class="btn btn-success btn-lg me-md-2" disabled>
                        ‚úÖ –í—ã —É–∂–µ —É—á–∞—Å—Ç–≤—É–µ—Ç–µ
                    </button>
                    <a href="{% url 'profile' %}" class="btn btn-outline-primary btn-lg">
                        –ü–µ—Ä–µ–π—Ç–∏ –∫ –º–æ–∏–º —á–µ–ª–ª–µ–Ω–¥–∂–∞–º
                    </a>
                {% else %}
                    <button class="btn btn-primary btn-lg me-md-2" disabled>
                        –ù–∞—á–∞—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂ (—Å–∫–æ—Ä–æ)
                    </button>
                    <a href="{% url 'challenge_list' %}" class="btn btn-outline-secondary btn-lg">
                        –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
                    </a>
                {% endif %}
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-primary btn-lg me-md-2">
                    üîê –í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å
                </a>
                <a href="{% url 'register' %}" class="btn btn-success btn-lg">
                    üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </a>
            {% endif %}
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card sticky-top" style="top: 20px;">
            <div class="card-header">
                <h5 class="card-title mb-0">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–µ–ª–ª–µ–Ω–¥–∂–∞</h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</span>
                        <strong>{{ challenge.get_category_display }}</strong>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>–°–ª–æ–∂–Ω–æ—Å—Ç—å:</span>
                        <strong>{{ challenge.difficulty_stars }}</strong>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span>
                        <strong>{{ challenge.duration_days }} –¥–Ω–µ–π</strong>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>–°—Ç–∞—Ç—É—Å:</span>
                        <span class="badge bg-success">–ê–∫—Ç–∏–≤–µ–Ω</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>–°–æ–∑–¥–∞–Ω:</span>
                        <small class="text-muted">{{ challenge.created_at|date:"d.m.Y" }}</small>
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-body">
                <h6>üí° –°–æ–≤–µ—Ç—ã –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</h6>
                <ul class="small">
                    <li class="mb-2">–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–∞–ª–æ–≥–æ - –ø–µ—Ä–≤—ã–µ 3 –¥–Ω—è —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ</li>
                    <li class="mb-2">–°—Ç–∞–≤—å—Ç–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ</li>
                    <li class="mb-2">–î–µ–ª–∏—Ç–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º —Å –¥—Ä—É–∑—å—è–º–∏</li>
                    <li class="mb-2">–ù–µ —Ä—É–≥–∞–π—Ç–µ —Å–µ–±—è –∑–∞ –ø—Ä–æ–ø—É—Å–∫–∏</li>
                    <li>–û—Ç–º–µ—á–∞–π—Ç–µ –º–∞–ª–µ–Ω—å–∫–∏–µ –ø–æ–±–µ–¥—ã</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}